{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict'\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport Axios from \"axios\";\n\n\nconst refs = {\n    formEl: document.querySelector('.form'),\n    input: document.querySelector('.valueGallery'),\n    galleryEl: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    btnLoad: document.querySelector('.btn-load'),\n    \n}\n\nlet _page = 1;\nconst limit = 15;\nconst totalPages = Math.ceil(500 / limit);\nlet value = '';\nconsole.log(value);\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.loader.style.visibility = 'hidden';\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    refs.galleryEl.innerHTML = '';\n    value = e.target.elements.valueGallery.value.trim();\n    if (value !== '') {\n        refs.loader.style.visibility = 'visible';\n    } \n    _page = 1;\n    const data = await getUrl();\n    if (data.hits.length > 0 & value !== '') {\n        refs.loader.style.visibility = 'hidden';\n        renderImages(data.hits);\n        refs.btnLoad.style.visibility = 'visible';\n    }else {\n            refs.loader.style.visibility = 'hidden';\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            })\n        }\n            \n            \n        \n    e.target.reset();\n};\n\n\nconst axios = Axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    \n})\nasync function getUrl() {\n\n    const response =await axios.get('',{params: {\n        key: '42132466-2eec74b8e2a534f613ea758a4',\n        q: value,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: limit,\n        page: _page,\n        \n    }\n    });\n    \n    return response.data;\n\n}\nfunction imageTemplate(img) {\n    const {webformatURL, largeImageURL, tags, likes, views, comments, downloads} = img;\n    \n    return `<li>\n    <div class=\"card\">\n    <div class=\"img-container\">\n    <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    </div>\n    <div class=\"img-comments\">\n    <p class=\"describe\">Likes ${ likes }</p>\n    <p class=\"describe\">Views ${ views }</p>\n    <p class=\"describe\">Comments ${ comments }</p>\n    <p class=\"describe\">Downloads ${downloads}</p>\n    </div>\n    </div>\n    </li>\n    `;\n}\nfunction imagesTemplate(images) {\n    return images.map(imageTemplate).join('');\n}\nfunction renderImages(images) {\n    const markup = imagesTemplate(images) ;\n    refs.galleryEl.insertAdjacentHTML('beforeend',markup);\n    let simpleLightBox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 }).refresh();\n};\n\n\nrefs.btnLoad.addEventListener('click', onBtnLoadClick);\n\nasync function onBtnLoadClick() {\n    _page += 1;\n      \n    const data = await getUrl();\n    renderImages(data.hits);\n    checkTotalHits(data.totalHits);\n    \n\n} \n\nfunction checkTotalHits(totalPages) {\n    if (_page > totalPages) { \n        return iziToast.error({\n        position: \"bottomRight\",\n        color: 'blue',\n        message: \"We're sorry, there are no more posts to load\"\n        });\n    };\n    }\n"],"names":["refs","_page","limit","value","onFormSubmit","e","data","getUrl","renderImages","iziToast","axios","Axios","imageTemplate","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","markup","SimpleLightbox","onBtnLoadClick","checkTotalHits","totalPages"],"mappings":"owBASA,MAAMA,EAAO,CACT,OAAQ,SAAS,cAAc,OAAO,EACtC,MAAO,SAAS,cAAc,eAAe,EAC7C,UAAW,SAAS,cAAc,UAAU,EAC5C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,WAAW,CAE/C,EAEA,IAAIC,EAAQ,EACZ,MAAMC,EAAQ,GAEd,IAAIC,EAAQ,GACZ,QAAQ,IAAIA,CAAK,EAEjBH,EAAK,OAAO,iBAAiB,SAAUI,CAAY,EACnDJ,EAAK,OAAO,MAAM,WAAa,SAE/B,eAAeI,EAAaC,EAAG,CAC3BA,EAAE,eAAc,EAChBL,EAAK,UAAU,UAAY,GAC3BG,EAAQE,EAAE,OAAO,SAAS,aAAa,MAAM,OACzCF,IAAU,KACVH,EAAK,OAAO,MAAM,WAAa,WAEnCC,EAAQ,EACR,MAAMK,EAAO,MAAMC,IACfD,EAAK,KAAK,OAAS,EAAIH,IAAU,IACjCH,EAAK,OAAO,MAAM,WAAa,SAC/BQ,EAAaF,EAAK,IAAI,EACtBN,EAAK,QAAQ,MAAM,WAAa,YAE5BA,EAAK,OAAO,MAAM,WAAa,SAC/BS,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,GAKTJ,EAAE,OAAO,OACb,CAGA,MAAMK,EAAQC,EAAM,OAAO,CACvB,QAAS,0BAEb,CAAC,EACD,eAAeJ,GAAS,CAcpB,OAZgB,MAAMG,EAAM,IAAI,GAAG,CAAC,OAAQ,CACxC,IAAK,qCACL,EAAGP,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUD,EACV,KAAMD,CAET,CACL,CAAK,GAEe,IAEpB,CACA,SAASW,EAAcC,EAAK,CACxB,KAAM,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAIP,EAE/E,MAAO;AAAA;AAAA;AAAA,eAGIE,CAAa;AAAA,gBACZD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,gCAITC,CAAO;AAAA,gCACPC,CAAO;AAAA,mCACJC,CAAU;AAAA,oCACVC,CAAS;AAAA;AAAA;AAAA;AAAA,KAK7C,CACA,SAASC,EAAeC,EAAQ,CAC5B,OAAOA,EAAO,IAAIV,CAAa,EAAE,KAAK,EAAE,CAC5C,CACA,SAASJ,EAAac,EAAQ,CAC1B,MAAMC,EAASF,EAAeC,CAAM,EACpCtB,EAAK,UAAU,mBAAmB,YAAYuB,CAAM,EAC/B,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,IAAK,EAAE,QAAU,CAChH,CAGAxB,EAAK,QAAQ,iBAAiB,QAASyB,CAAc,EAErD,eAAeA,GAAiB,CAC5BxB,GAAS,EAET,MAAMK,EAAO,MAAMC,IACnBC,EAAaF,EAAK,IAAI,EACtBoB,EAAepB,EAAK,SAAS,CAGjC,CAEA,SAASoB,EAAeC,EAAY,CAChC,GAAI1B,EAAQ0B,EACR,OAAOlB,EAAS,MAAM,CACtB,SAAU,cACV,MAAO,OACP,QAAS,8CACjB,CAAS,CAET"}