{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import {refs} from '../main'\n\nexport function imageTemplate(img) {\n    const {webformatURL, largeImageURL, tags, likes, views, comments, downloads} = img;\n    return `<li>\n    <div class=\"card\">\n    <div class=\"img-container\">\n    <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    </div>\n    <div class=\"img-comments\">\n    <p class=\"describe\">Likes ${ likes }</p>\n    <p class=\"describe\">Views ${ views }</p>\n    <p class=\"describe\">Comments ${ comments }</p>\n    <p class=\"describe\">Downloads ${downloads}</p>\n    </div>\n    </div>\n    </li>\n    `;\n}\nexport function imagesTemplate(images) {\n    return images.map(imageTemplate).join('');\n}\nexport function renderImages(images) {\n    const markup = imagesTemplate(images) ;\n    refs.galleryEl.insertAdjacentHTML('beforeend',markup);\n    \n};\n\n","'use strict'\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport {renderImages} from './js/render-functions';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport Axios from \"axios\";\n\n\n\nexport const refs = {\n    formEl: document.querySelector('.form'),\n    input: document.querySelector('.valueGallery'),\n    galleryEl: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    btnLoad: document.querySelector('.btn-load'),\n    \n}\n\nlet _page = 1;\nconst limit = 15;\nlet totalPages = 0;\nlet value = '';\nconst simpleLightBox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nloaderHide();\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    refs.galleryEl.innerHTML = '';\n    BtnLoaderHide();\n    value = e.target.elements.valueGallery.value.trim();\n    if (!value) {\n        messageErr('Sorry, there are no images matching your search query. Please try again!');\n        return;\n    }\n    if (value !== '') {\n        loaderShow();\n        _page = 1;\n    try {\n        const data = await getUrl();\n        if (data.hits.length >= 1) {\n            loaderHide();\n            renderImages(data.hits);\n            simpleLightBox.refresh();\n            if (data.hits.length<limit) {\n                BtnLoaderHide();\n                messageErr(\"We're sorry, there are no more posts to load\");\n            }else{\n            BtnLoaderShow();\n        } \n    }else {\n            loaderHide();\n            messageErr('Sorry, there are no images matching your search query. Please try again!');\n        }\n    }catch (err) {\n        totalPages = 0;\n        checkTotalHits(totalPages);\n    }\n}\n    e.target.reset();\n};\n\n\n\nrefs.btnLoad.addEventListener('click', onBtnLoadClick);\n\nasync function onBtnLoadClick() {\n    _page += 1; \n    loaderShow();\n    const data = await getUrl();\n    renderImages(data.hits);\n    simpleLightBox.refresh();\n    checkTotalHits(data.totalHits);\n    loaderHide();\n    const card = document.querySelector('.card');\n    let rect = 2 * card.getBoundingClientRect().height;\n    window.scrollBy({\n    top: rect,\n    behavior: 'smooth',\n});\n} \n\nfunction checkTotalHits(totalHits) {\n    totalPages = Math.ceil(totalHits / limit);\n    if (totalPages<=_page) { \n        BtnLoaderHide();\n        messageErr(\"We're sorry, there are no more posts to load\");\n    };\n    }\n\nfunction messageErr(message) {\n    return iziToast.error({\n        position: \"topRight\",\n        color: 'blue',\n        message: message,\n        });\n}\nfunction loaderShow() {\n    refs.loader.style.visibility = 'visible';\n}\nfunction loaderHide() {\n    refs.loader.style.visibility = 'hidden';\n}\nfunction BtnLoaderShow() {\n    refs.btnLoad.style.visibility = 'visible';\n}\nfunction BtnLoaderHide() {\n    refs.btnLoad.style.visibility = 'hidden';\n}\n\nconst axios = Axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    \n})\nasync function getUrl() {\n    const response = await axios.get('',{params: {\n        key: '42132466-2eec74b8e2a534f613ea758a4',\n        q: value,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: limit,\n        page: _page,\n        \n    }\n    });\n    return response.data;\n}"],"names":["imageTemplate","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","renderImages","markup","refs","_page","limit","totalPages","value","simpleLightBox","SimpleLightbox","onFormSubmit","loaderHide","BtnLoaderHide","messageErr","loaderShow","data","getUrl","BtnLoaderShow","checkTotalHits","onBtnLoadClick","rect","totalHits","message","iziToast","axios","Axios"],"mappings":"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"}