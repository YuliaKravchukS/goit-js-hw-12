{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict'\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport Axios from \"axios\";\n\n\nconst refs = {\n    formEl: document.querySelector('.form'),\n    input: document.querySelector('#valueGallery'),\n    galleryEl: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    btnLoad: document.querySelector('.btn-load'),\n    \n}\n\nlet _page = 1;\nconst limit = 15;\nconst totalPages = Math.ceil(500/ limit);\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.loader.style.visibility = 'hidden';\n\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    refs.galleryEl.innerHTML = '';\n    const value = e.target.elements.valueGallery.value;\n    if (value !== '') {\n        refs.loader.style.visibility = 'visible';\n    }  \n    const data = await getUrl(value);\n        if (data.length > 0 & value !== '') {\n            refs.loader.style.visibility = 'hidden';\n            renderImages(data);\n            _page += 1;\n            \n            if (_page > 1) {\n                refs.btnLoad.style.visibility = 'visible';\n                refs.btnLoad.addEventListener('click', async () => {\n\n            if (_page > totalPages) {\n            return iziToast.error({\n                position: \"bottomRight\",\n                color: 'blue',\n                message: \"We're sorry, there are no more posts to load\"\n            });\n            \n        };\n                    const data = await getUrl(value);\n                    renderImages(data);\n                    _page += 1;\n                });\n            }\n        } else {\n            refs.loader.style.visibility = 'hidden';\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            })\n        }\n        \n    e.target.reset();\n};\n\n\nconst axios = Axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    \n})\nasync function getUrl(clientValue) {\n\n    const response =await axios.get('',{params: {\n        key: '42132466-2eec74b8e2a534f613ea758a4',\n        q: clientValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: limit,\n        page: _page,\n        \n        \n    }\n    });\n    \n    return response.data.hits;\n\n}\n\n\n\nfunction imageTemplate(img) {\n    const {webformatURL, largeImageURL, tags, likes, views, comments, downloads} = img;\n    \n    return `<li>\n    <div class=\"card\">\n    <div class=\"img-container\">\n    <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    </div>\n    <div class=\"img-comments\">\n    <p class=\"describe\">Likes ${ likes }</p>\n    <p class=\"describe\">Views ${ views }</p>\n    <p class=\"describe\">Comments ${ comments }</p>\n    <p class=\"describe\">Downloads ${downloads}</p>\n    </div>\n    </div>\n    </li>\n    `;\n}\n\n\nfunction imagesTemplate(images) {\n    return images.map(imageTemplate).join('');\n}\nfunction renderImages(images) {\n    const markup = imagesTemplate(images) ;\n    refs.galleryEl.insertAdjacentHTML('beforeend',markup);\n    let simpleLightBox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 }).refresh();\n};"],"names":["refs","_page","limit","totalPages","onFormSubmit","e","value","data","getUrl","renderImages","iziToast","axios","Axios","clientValue","imageTemplate","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","markup","SimpleLightbox"],"mappings":"owBASA,MAAMA,EAAO,CACT,OAAQ,SAAS,cAAc,OAAO,EACtC,MAAO,SAAS,cAAc,eAAe,EAC7C,UAAW,SAAS,cAAc,UAAU,EAC5C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,WAAW,CAE/C,EAEA,IAAIC,EAAQ,EACZ,MAAMC,EAAQ,GACRC,EAAa,KAAK,KAAK,IAAKD,CAAK,EAEvCF,EAAK,OAAO,iBAAiB,SAAUI,CAAY,EACnDJ,EAAK,OAAO,MAAM,WAAa,SAG/B,eAAeI,EAAaC,EAAG,CAC3BA,EAAE,eAAc,EAChBL,EAAK,UAAU,UAAY,GAC3B,MAAMM,EAAQD,EAAE,OAAO,SAAS,aAAa,MACzCC,IAAU,KACVN,EAAK,OAAO,MAAM,WAAa,WAEnC,MAAMO,EAAO,MAAMC,EAAOF,CAAK,EACvBC,EAAK,OAAS,EAAID,IAAU,IAC5BN,EAAK,OAAO,MAAM,WAAa,SAC/BS,EAAaF,CAAI,EACjBN,GAAS,EAELA,EAAQ,IACRD,EAAK,QAAQ,MAAM,WAAa,UAChCA,EAAK,QAAQ,iBAAiB,QAAS,SAAY,CAEvD,GAAIC,EAAQE,EACZ,OAAOO,EAAS,MAAM,CAClB,SAAU,cACV,MAAO,OACP,QAAS,8CACzB,CAAa,EAGO,MAAMH,EAAO,MAAMC,EAAOF,CAAK,EAC/BG,EAAaF,CAAI,EACjBN,GAAS,CAC7B,CAAiB,KAGLD,EAAK,OAAO,MAAM,WAAa,SAC/BU,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,GAGTL,EAAE,OAAO,OACb,CAGA,MAAMM,EAAQC,EAAM,OAAO,CACvB,QAAS,0BAEb,CAAC,EACD,eAAeJ,EAAOK,EAAa,CAe/B,OAbgB,MAAMF,EAAM,IAAI,GAAG,CAAC,OAAQ,CACxC,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUX,EACV,KAAMD,CAGT,CACL,CAAK,GAEe,KAAK,IAEzB,CAIA,SAASa,EAAcC,EAAK,CACxB,KAAM,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAIP,EAE/E,MAAO;AAAA;AAAA;AAAA,eAGIE,CAAa;AAAA,gBACZD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,gCAITC,CAAO;AAAA,gCACPC,CAAO;AAAA,mCACJC,CAAU;AAAA,oCACVC,CAAS;AAAA;AAAA;AAAA;AAAA,KAK7C,CAGA,SAASC,EAAeC,EAAQ,CAC5B,OAAOA,EAAO,IAAIV,CAAa,EAAE,KAAK,EAAE,CAC5C,CACA,SAASL,EAAae,EAAQ,CAC1B,MAAMC,EAASF,EAAeC,CAAM,EACpCxB,EAAK,UAAU,mBAAmB,YAAYyB,CAAM,EAC/B,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,IAAK,EAAE,QAAU,CAChH"}